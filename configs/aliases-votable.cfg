// Custom aliases for SMB Public America

set g_physics_nexuiz_accelerate 9
set g_physics_nexuiz_airaccelerate 9
set g_physics_nexuiz_airaccel_sideways_friction 0.5

// Nexuiz mode
alias nexuiz_flags "g_ctf_flag_red_model models/ctf/flags_nexotic.md3; g_ctf_flag_blue_model models/ctf/flags_nexotic.md3; g_ctf_flag_yellow_model models/ctf/flags_nexotic.md3; g_ctf_flag_pink_model models/ctf/flags_nexotic.md3; g_ctf_flag_neutral_model models/ctf/flags_nexotic.md3"
alias nexuiz_playermodels "sv_defaultplayermodel models/player/nexus.zym"
alias nexuiz_weapons "sv_weapons_sounddir nexuiz; sv_weapons_modeloverride nexuiz"
alias nexuiz_items "sv_items_modeloverride nexuiz"
alias nexuiz_balance "g_new_toys 1; g_new_toys_autoreplace 0; g_new_toys_use_pickupsound 0; exec balance-nexuiz25.cfg; exec bal-wep-rabs.cfg; g_balance_devastator_detonatedelay 0; g_balance_shockwave_weaponstart 0; common_balance"
alias nexuiz_physics "g_physics_clientselect_default nexuiz; sv_stepheight 34"

// Xonotic mode
alias xonotic_flags "g_ctf_flag_red_model models/ctf/flags.md3; g_ctf_flag_blue_model models/ctf/flags.md3; g_ctf_flag_yellow_model models/ctf/flags.md3; g_ctf_flag_pink_model models/ctf/flags.md3; g_ctf_flag_neutral_model models/ctf/flags.md3"
alias xonotic_playermodels "sv_defaultplayermodel models/player/megaerebus.iqm"
alias xonotic_weapons "sv_weapons_sounddir \"\"; sv_weapons_modeloverride \"\""
alias xonotic_items "sv_items_modeloverride \"\""
alias xonotic_balance "g_new_toys 0; g_new_toys_autoreplace 2; g_new_toys_use_pickupsound 1; exec balance-xonotic.cfg; g_balance_vortex_switchdelay_raise 0.2; g_balance_vortex_switchdelay_drop 0.2; common_balance; g_balance_machinegun_weaponreplace arc"
alias xonotic_physics "g_physics_clientselect_default xonotic; sv_stepheight 34"

alias overkill_balance "exec balance-overkill.cfg"

alias xpm_balance "g_new_toys 0; g_new_toys_autoreplace 2; g_new_toys_use_pickupsound 1; exec balance-xpm.cfg; g_balance_vortex_switchdelay_raise 0.2; g_balance_vortex_switchdelay_drop 0.2; common_balance; g_balance_machinegun_weaponreplace arc"

// Common options
alias common_balance "g_balance_shotgun_weaponreplace machinegun; g_balance_rifle_weaponreplace vortex; g_balance_shockwave_weaponstart 0; g_balance_grapplehook_pull_frozen 0"

// Defaults
alias default_balance "vote_xonotic"
alias default_options "default_balance; common_balance; g_nades 0; g_weaponarena 0; g_overkill 0; g_instagib 0; g_melee_only 0; g_riflearena 0; g_grappling_hook 0; g_spawn_near_teammate 0; g_dodging 0; g_jetpack 0; g_jetpack_fuel 8; g_nix 0; g_nix_with_blaster 1; g_walljump 0; g_shotgunarena 0"

// Mode specific hacks
set sv_vote_gametype_okctf_type ctf
set sv_vote_gametype_okctf_name "Overkill CTF"
set sv_vote_gametype_okctf_description "Capture the Flag match with the Overkill mod"
alias sv_vote_gametype_hook_okctf "default_options; overkill_balance; g_overkill 1; g_dodging 1; g_spawn_near_teammate 1; g_nades 1; timelimit_override 15"

set sv_vote_gametype_shadm_type dm
set sv_vote_gametype_shadm_name "Shotgun Arena DM"
set sv_vote_gametype_shadm_description "Deathmatch with the Shotgun Arena mod"
alias sv_vote_gametype_hook_shadm "default_options; g_shotgunarena 1; g_nades 1; g_walljump 1"

set sv_vote_gametype_meleems_type lms
set sv_vote_gametype_meleems_name "Melee Only LMS"
set sv_vote_gametype_meleems_description "Fight to be the last man standing with nothing but your melee!"
alias sv_vote_gametype_hook_meleems "default_options; g_melee_only 1; g_lms_start_ammo_shells 0"

set sv_vote_gametype_jetctf_type ctf
set sv_vote_gametype_jetctf_name "JetPack CTF"
set sv_vote_gametype_jetctf_description "Take the fight to the skies with jetpack CTF!"
alias sv_vote_gametype_hook_jetctf "default_options; g_jetpack 1; g_jetpack_fuel 1; timelimit_override 15"

set sv_vote_gametype_nexdm_type ka
set sv_vote_gametype_nexdm_name "Nix-Nex KA"
set sv_vote_gametype_nexdm_description "Keepaway with a twistuiz!"
alias sv_vote_gametype_hook_nexdm "default_options; vote_nexuiz; g_nix 1"

set sv_vote_gametype_craft_type ft
set sv_vote_gametype_craft_name "CRA FT"
set sv_vote_gametype_craft_description "Freeze Tag with rifles!"
alias sv_vote_gametype_hook_craft "default_options; g_riflearena 1; g_balance_grapplehook_pull_frozen 2"

set sv_vote_gametype_watdm_type tdm
set sv_vote_gametype_watdm_name "TDM"
set sv_vote_gametype_watdm_description "Plain old Team Deathmatch"
alias sv_vote_gametype_hook_watdm "default_options; xpm_balance; g_chat_nospectators 2; g_warmup 1"

sv_vote_gametype_options "nexdm meleems jetctf shadm okctf craft watdm"


// Voting system
alias valias "addvote ${1}; alias ${* ?}"
alias vote_xonotic "xonotic_physics; xonotic_balance; xonotic_items; xonotic_playermodels; xonotic_flags; xonotic_weapons"
alias vote_nexuiz "nexuiz_physics; nexuiz_balance; nexuiz_items; nexuiz_playermodels; nexuiz_flags; nexuiz_weapons"

alias vmsg_nextmatch "say ^3${* ?} ^2will be active in the next match, vote restartmatch or endmatch to apply now!"
alias vmsg "say ^2To turn $3- $1, type this in your console: ^3vcall $2"

valias nexuiz "alias temp_gameend_hooks vote_nexuiz; vmsg_nextmatch nexuiz"
valias xonotic "alias temp_gameend_hooks vote_xonotic; vmsg_nextmatch xonotic"
valias powerups "g_powerups -1; g_buffs 0; vmsg off nopowerups power-ups"
valias nopowerups "g_powerups 0; vmsg on powerups power-ups"
valias buffs "g_buffs 1; g_powerups 0; vmsg off nobuffs buffs"
valias nobuffs "g_buffs 0; vmsg on buffs buffs"
valias weaponarena "g_weaponarena most; vmsg_nextmatch weapon arena"
valias noweaponarena "g_weaponarena 0; vmsg_nextmatch vanilla weapons"
valias freeze "g_freeze 2; vmsg_nextmatch freeze"
valias nofreeze "g_freeze 0; vmsg_nextmatch freeze (disabled)"

alias restartmatch "nextmap ${sv_worldbasename}; endmatch"
addvote restartmatch

valias 0v0 "g_maxplayers 0"
valias 1v1 "g_maxplayers 2"
valias 2v2 "g_maxplayers 4"
valias 3v3 "g_maxplayers 6"
valias 4v4 "g_maxplayers 8"
valias 5v5 "g_maxplayers 10"
valias 6v6 "g_maxplayers 12"

alias bots_6 "minplayers 6"
alias bots_4 "minplayers 4"
alias bots_2 "minplayers 2"
alias bots_ "minplayers 2"
valias bots "bots_${* ?}"
valias nobots "minplayers 0"

alias speedcaps "settemp minplayers 0; settemp g_ctf_throw_punish_delay 1; settemp g_ctf_flag_return_time 0.1; fraglimit 30; timelimit 60; say ^2Speedcapping enabled for this match"

// admin commands
alias resetname "stuffto ${1} \"name ^1CHANGE_ME\"; adminmsg ${1} ^7Your name has been deemed inappropriate and reset by the admins, please ^1change your name!"
alias disablejoin "prvm_edictset server 1 version_mismatch 1"
alias enablejoin "prvm_edictset server 1 version_mismatch 0"

alias sv_hook_gamestart_all "minplayers 2; alias temp_gameend_hooks"
alias sv_hook_gamestart_kh "minplayers 3"

alias sv_hook_gameend "temp_gameend_hooks"

alias sv_vote_gametype_hook_all "timelimit_override 10; g_campcheck 0; g_chat_nospectators 0; g_warmup 0"
alias sv_vote_gametype_hook_lms "g_campcheck 1"
alias sv_vote_gametype_hook_ca "g_campcheck 1; g_chat_nospectators 2; g_warmup 1"
alias sv_vote_gametype_hook_tdm "g_chat_nospectators 2; g_warmup 1"
alias sv_vote_gametype_hook_ctf "timelimit_override 15"
